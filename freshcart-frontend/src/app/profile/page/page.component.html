<div class="profile-container" *ngIf="!loading; else loadingTpl">
  <form [formGroup]="profileForm" (ngSubmit)="onSubmit()">
    <div *ngIf="error" class="alert alert-danger">{{ error }}</div>
    <div *ngIf="success" class="alert alert-success">{{ success }}</div>
    <div class="form-group">
      <label>Username</label>
      <input class="form-control" formControlName="username" readonly />
    </div>
    <div class="form-group">
      <label>Email</label>
      <input class="form-control" formControlName="email" readonly />
    </div>
    <div class="form-group">
      <label>First Name</label>
      <input class="form-control" formControlName="firstName" [class.is-invalid]="f.firstName.invalid && f.firstName.touched" />
      <div *ngIf="f.firstName.invalid && f.firstName.touched" class="invalid-feedback">First name is required (min 2 chars).</div>
    </div>
    <div class="form-group">
      <label>Last Name</label>
      <input class="form-control" formControlName="lastName" [class.is-invalid]="f.lastName.invalid && f.lastName.touched" />
      <div *ngIf="f.lastName.invalid && f.lastName.touched" class="invalid-feedback">Last name is required (min 2 chars).</div>
    </div>
    <div class="form-group">
      <label>Phone Number</label>
      <input class="form-control" formControlName="phoneNumber" />
    </div>
    <div class="form-group">
      <label>Address Line 1</label>
      <input class="form-control" formControlName="addressLine1" />
    </div>
    <div class="form-group">
      <label>Address Line 2</label>
      <input class="form-control" formControlName="addressLine2" />
    </div>
    <div class="form-group">
      <label>City</label>
      <input class="form-control" formControlName="city" />
    </div>
    <div class="form-group">
      <label>State</label>
      <input class="form-control" formControlName="state" />
    </div>
    <div class="form-group">
      <label>Postal Code</label>
      <input class="form-control" formControlName="postalCode" />
    </div>
    <div class="form-group">
      <label>Country</label>
      <input class="form-control" formControlName="country" />
    </div>
    <button class="btn btn-primary" type="submit" [disabled]="profileForm.invalid || loading">Save Changes</button>
  </form>
</div>
<ng-template #loadingTpl>
  <div class="loading">Loading profile...</div>
</ng-template>
