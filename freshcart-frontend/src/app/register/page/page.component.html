<div class="register-container">
  <h2>Register</h2>
  <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="username">Username</label>
      <input id="username" type="text" formControlName="username" [class.invalid]="f.username.invalid && (f.username.dirty || f.username.touched)" />
      <div class="error" *ngIf="f.username.invalid && (f.username.dirty || f.username.touched)">
        <div *ngIf="f.username.errors?.required">Username is required.</div>
        <div *ngIf="f.username.errors?.minlength">Username must be at least 3 characters.</div>
      </div>
    </div>
    <div class="form-group">
      <label for="email">Email</label>
      <input id="email" type="email" formControlName="email" [class.invalid]="f.email.invalid && (f.email.dirty || f.email.touched)" />
      <div class="error" *ngIf="f.email.invalid && (f.email.dirty || f.email.touched)">
        <div *ngIf="f.email.errors?.required">Email is required.</div>
        <div *ngIf="f.email.errors?.email">Enter a valid email.</div>
      </div>
    </div>
    <div class="form-group">
      <label for="password">Password</label>
      <input id="password" type="password" formControlName="password" [class.invalid]="f.password.invalid && (f.password.dirty || f.password.touched)" />
      <div class="error" *ngIf="f.password.invalid && (f.password.dirty || f.password.touched)">
        <div *ngIf="f.password.errors?.required">Password is required.</div>
        <div *ngIf="f.password.errors?.minlength">Password must be at least 8 characters.</div>
      </div>
    </div>
    <div class="form-group">
      <label for="firstName">First Name</label>
      <input id="firstName" type="text" formControlName="firstName" [class.invalid]="f.firstName.invalid && (f.firstName.dirty || f.firstName.touched)" />
      <div class="error" *ngIf="f.firstName.invalid && (f.firstName.dirty || f.firstName.touched)">
        <div *ngIf="f.firstName.errors?.required">First name is required.</div>
        <div *ngIf="f.firstName.errors?.minlength">First name must be at least 2 characters.</div>
      </div>
    </div>
    <div class="form-group">
      <label for="lastName">Last Name</label>
      <input id="lastName" type="text" formControlName="lastName" [class.invalid]="f.lastName.invalid && (f.lastName.dirty || f.lastName.touched)" />
      <div class="error" *ngIf="f.lastName.invalid && (f.lastName.dirty || f.lastName.touched)">
        <div *ngIf="f.lastName.errors?.required">Last name is required.</div>
        <div *ngIf="f.lastName.errors?.minlength">Last name must be at least 2 characters.</div>
      </div>
    </div>
    <button type="submit" [disabled]="loading || registerForm.invalid">{{ loading ? 'Registering...' : 'Register' }}</button>
    <div class="error" *ngIf="error">{{ error }}</div>
    <div class="success" *ngIf="success">{{ success }}</div>
  </form>
  <div class="login-link">
    Already have an account? <a routerLink="/login">Login here</a>.
  </div>
</div>
